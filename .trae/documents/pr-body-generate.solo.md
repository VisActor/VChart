# PR 正文生成 Job（Solo 使用说明）

- 入口文件：`./.trae/jobs/pr-body-generate.md`
- 作用：依据仓库 PR 模版生成完整正文（`pr.body`），输出预览与本地文件，等待人工修订

## 参数
- `lang`：`zh|en`，默认 `zh`
- `title`：可选；用于生成 `generated_title`
- `head`：可选；未提供时自动推导当前分支仅用于展示
- `labels`：可选标签数组（用于正文元信息展示）
- `rushChangesDir`：默认 `common/changes`
- `localBodyFile`：是否写入本地正文文件（默认 `true`）
- `openEditor`：是否生成后自动在编辑器中打开正文文件（默认 `false`）
- `message`：可选；用于摘要与“背景&方案”的素材

## 前置
- 推荐先完成本地变更与自测；该 Job 不进行提交或推送，仅生成正文。

## 使用（Solo）
- 在聊天中发起：“执行 PR Body Job（.trae/jobs/pr-body-generate.md）”，可传：
  - `title: '[Auto] feature-legend'`
  - （可选）`head: chore/trae-feature-legend-20251222-1030`
  - （可选）`localBodyFile: true`
  - （可选）`openEditor: true`
  - （可选）`message: 'Add legend auto layout and tests'`

## 输出

- `generated_title`：建议标题
- `generated_body_preview`：完整 Markdown 代码块正文（便于复制）
- `generated_body_file`：默认 `./.trae/output/pr.body.local.md`（纯 Markdown，无外层三引号，不追加任何“Generated by ...”类提示）

## 人工检查
- 在编辑器中打开并修订 `./.trae/output/pr.body.local.md`
- 确保以下栏目完整：勾选项、关联链接、背景&方案、Changelog、自测、Summary、Walkthrough
- 修订完成后，执行“创建 PR” Job（`./.trae/jobs/pr-create-from-body.md`）
